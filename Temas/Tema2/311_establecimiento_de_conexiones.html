<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3.1.1.- Establecimiento de conexiones. | DWES02 </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Jesús Manuel Marín Navarro" />
<meta name="generator" content="eXeLearning 2.4.2 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-9"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">DWES02</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Trabajar con bases de datos en PHP.</a></li>
   <li><a href="1_acceso_a_bases_de_datos_desde_php.html" class="no-ch">1.- Acceso a bases de datos desde PHP.</a></li>
   <li><a href="2_mysql.html" class="daddy">2.- MySQL.</a>
   <ul class="other-section">
      <li><a href="21_instalacin_y_configuracin.html" class="no-ch">2.1.- Instalación y configuración.</a></li>
      <li><a href="22_herramientas_de_administracin.html" class="daddy">2.2.- Herramientas de administración.</a>
      <ul class="other-section">
         <li><a href="221_mysql_y_mysqladmin.html" class="no-ch">2.2.1.- mysql y mysqladmin.</a></li>
         <li><a href="222_phpmyadmin.html" class="no-ch">2.2.2.- phpMyAdmin.</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="3_utilizacin_de_bases_de_datos_mysql_en_php.html" class="current-page-parent daddy">3.- Utilización de bases de datos MySQL en PHP.</a>
   <ul>
      <li class="current-page-parent"><a href="31_extensin_mysqli.html" class="current-page-parent daddy">3.1.- Extensión MySQLi.</a>
      <ul>
         <li id="active"><a href="311_establecimiento_de_conexiones.html" class="active no-ch">3.1.1.- Establecimiento de conexiones.</a></li>
         <li><a href="312_ejecucin_de_consultas.html" class="no-ch">3.1.2.- Ejecución de consultas.</a></li>
         <li><a href="313_transacciones.html" class="no-ch">3.1.3.- Transacciones.</a></li>
         <li><a href="314_obtencin_y_utilizacin_de_conjuntos_de_resultados.html" class="no-ch">3.1.4.- Obtención y utilización de conjuntos de resultados.</a></li>
         <li><a href="315_consultas_preparadas.html" class="no-ch">3.1.5.- Consultas preparadas.</a></li>
      </ul>
      </li>
      <li><a href="32_php_data_objects_pdo.html" class="daddy">3.2.- PHP Data Objects (PDO).</a>
      <ul class="other-section">
         <li><a href="321_establecimiento_de_conexiones.html" class="no-ch">3.2.1.- Establecimiento de conexiones.</a></li>
         <li><a href="322_ejecucin_de_consultas.html" class="no-ch">3.2.2.- Ejecución de consultas.</a></li>
         <li><a href="323_obtencin_y_utilizacin_de_conjuntos_de_resultados.html" class="no-ch">3.2.3.- Obtención y utilización de conjuntos de resultados.</a></li>
         <li><a href="324_consultas_preparadas.html" class="no-ch">3.2.4.- Consultas preparadas.</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="4_errores_y_manejo_de_excepciones.html" class="daddy">4.- Errores y manejo de excepciones.</a>
   <ul class="other-section">
      <li><a href="41_excepciones.html" class="no-ch">4.1.- Excepciones.</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="31_extensin_mysqli.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="312_ejecucin_de_consultas.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">3.1.1.- Establecimiento de conexiones.</h1></header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id35">
<div class="iDevice emphasis0">
<div id="ta35_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado"><img src="DWES03_CONT_R09_mysqli_conexion.png" alt=" Símbolo de conexión de dos enchufes junto a las letras mysqli." title="Conexión MySQLi." width="160" height="164" /></div>
<div class="elemento_centrado credenciales"><a class="cc0" title="Dominio público" href="http://creativecommons.org/publicdomain/zero/1.0/deed.es" target="_blank" rel="noopener"><span class="transparente">Dominio público</span></a> Elaboración Propia</div>
</div>
<p>Para poder comunicarte desde un programa PHP con un servidor MySQL, el primer paso es establecer una conexión. Toda comunicación posterior que tenga lugar, se hará utilizando esa conexión.</p>
<p>Si utilizas la extensión MySQLi, establecer una conexión con el servidor significa crear una instancia de la <strong>clase mysqli</strong>. El constructor de la clase puede recibir seis parámetros, todos opcionales, aunque lo más habitual es utilizar los cuatro primeros:</p>
<ul class="lista_verificacion">
<li>El nombre o dirección <acronym title="Internet Protocol." lang="en">IP</acronym> del servidor MySQL al que te quieres conectar.</li>
<li>Un nombre de usuario con permisos para establecer la conexión.</li>
<li>La contraseña del usuario.</li>
<li>El nombre de la base de datos a la que conectarse.</li>
<li>El número del puerto en que se ejecuta el servidor MySQL.</li>
<li>El socket o la tubería con nombre (<span lang="en">named pipe</span>) a usar.</li>
</ul>
<p>Si utilizas el constructor de la clase, para conectarte a la base de datos "dwes" puedes hacer:</p>
<div class="highlighted-code language-php">
<div>
<pre><code>// utilizando el constructor de la clase

$dwes = new mysqli('localhost', 'dwes', 'abc123.', 'dwes');

</code></pre>
</div>
</div>
<p></p>
<p><br /> </p>
<p>Aunque también tienes la opción de primero crear la instancia, y después utilizar el método connect para establecer la conexión con el servidor:</p>
<div class="elemento_centrado" style="width: 36.25em;">
<div class="texto_izquierda">
<pre><code></code></pre>
<div class="highlighted-code language-php">
<div>
<pre><code>// utilizando el método connect

$dwes = new mysqli();

$dwes-&gt;connect('localhost', 'dwes', 'abc123.', 'dwes');</code></pre>
</div>
</div>
<pre><code> </code></pre>
</div>
</div>
<p> </p>
<p>Por el contrario, utilizando el interface procedimental de la extensión:</p>
<div class="elemento_centrado" style="width: 40.65em;">
<div class="texto_izquierda">
<pre><code></code></pre>
<div class="highlighted-code language-php">
<div>
<pre><code>// utilizando llamadas a funciones

$dwes = mysqli_connect('localhost', 'dwes', 'abc123.', 'dwes');</code></pre>
</div>
</div>
<pre><code> </code></pre>
</div>
</div>
<p> </p>
<p>Es importante verificar que la conexión se ha establecido correctamente. Para comprobar el error, en caso de que se produzca, puedes usar las siguientes propiedades (o funciones equivalentes) de la clase mysqli:</p>
<ul class="lista_verificacion">
<li><code><strong>connect_errno</strong></code> (o la función <code><strong>mysqli_connect_errno</strong></code>) devuelve el número de error o null si no se produce ningún error.</li>
<li><code><strong>connect_error</strong></code> (o la función <code><strong>mysqli_connect_error</strong></code>) devuelve el mensaje de error o null si no se produce ningún error.</li>
</ul>
<p>Por ejemplo, el siguiente código comprueba el establecimiento de una conexión con la base de datos "dwes" y finaliza la ejecución si se produce algún error:</p>
<div class="elemento_centrado" style="width: 55.5em;">
<div class="texto_izquierda">
<pre><code></code></pre>
<div class="highlighted-code language-php">
<div>
<pre><code>@ $dwes = new mysqli('localhost', 'dwes', 'abc123.', 'dwes');

$error = $dwes-&gt;connect_errno;

if ($error != null) {

     echo "&lt;p&gt;Error $error conectando a la base de datos: $dwes-&gt;connect_error&lt;/p&gt;";

     exit();

}</code></pre>
</div>
</div>
<pre><code> </code></pre>
</div>
</div>
<p> </p>
</div>
</div>
</article>
<article class="iDevice_wrapper DestacadofpdIdevice" id="id36">
<div class="iDevice emphasis0" >
<div class="iDevice_destacadofpd">
<div id="ta36_70" class="block iDevice_content">
<p>
En PHP, como veremos posteriormente con más detalle, puedes anteponer a cualquier expresión el operador de control de errores @ para que se ignore cualquier posible error que pueda producirse al ejecutarla.
</p>
<p class="enlace_centrado">
<a href="http://es.php.net/manual/es/language.operators.errorcontrol.php" title="Acceder al manual de PHP con información sobre el operador de control de errores." target="_self"> Operador de control de errores @</a>.
</p>

</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id37">
<div class="iDevice emphasis0">
<div id="ta37_73" class="block iDevice_content">
<p>Si una vez establecida la conexión, quieres cambiar la base de datos puedes usar el método <code><strong>select_db</strong></code> (o la función <code><strong>mysqli_select_db</strong></code> de forma equivalente) para indicar el nombre de la nueva.</p>
<div class="elemento_centrado" style="width: 23.05em;">
<div class="highlighted-code language-php">
<div>
<pre><code>// utilizando el método connect

$dwes-&gt;select_db('otra_bd');</code></pre>
</div>
</div>
</div>
<p></p>
<p>Una vez finalizadas las tareas con la base de datos, utiliza el método <code><strong>close</strong></code> (o la función <code><strong>mysqli_close</strong></code>) para cerrar la conexión con la base de datos y liberar los recursos que utiliza.</p>
<div class="elemento_centrado" style="width: 14.25em;">
<div class="texto_izquierda">
<div class="highlighted-code language-php">
<div>
<pre><code>$dwes-&gt;close();</code></pre>
</div>
</div>
</div>
</div>
<p> </p>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="31_extensin_mysqli.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="312_ejecucin_de_consultas.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>