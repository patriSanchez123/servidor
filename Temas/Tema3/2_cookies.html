<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>2.- Cookies. | Tema 3 </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="NONAME" />
<meta name="generator" content="eXeLearning 2.4.2 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" /></head>
<body class="exe-web-site" id="exe-node-5"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">Tema 3</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Desarrollo de aplicaciones web con PHP.</a></li>
   <li><a href="1_autentificacin_de_usuarios_y_control_de_acceso.html" class="daddy">1.- Autentificación de usuarios y control de acceso.</a>
   <ul class="other-section">
      <li><a href="11_mecanismos_de_autentificacin_i.html" class="daddy">1.1.- Mecanismos de autentificación (I).</a>
      <ul class="other-section">
         <li><a href="111_mecanismos_de_autentificacin_ii.html" class="no-ch">1.1.1.- Mecanismos de autentificación (II).</a></li>
      </ul>
      </li>
      <li><a href="12_incorporacin_de_mtodos_de_autentificacin_a_una_aplicacin_web.html" class="no-ch">1.2.- Incorporación de métodos de autentificación a una aplicación web.</a></li>
   </ul>
   </li>
   <li id="active"><a href="2_cookies.html" class="active no-ch">2.- Cookies.</a></li>
   <li><a href="3_manejo_de_sesiones.html" class="daddy">3.- Manejo de sesiones.</a>
   <ul class="other-section">
      <li><a href="31_configuracin.html" class="no-ch">3.1.- Configuración.</a></li>
      <li><a href="32_inicio_y_fin_de_una_sesin.html" class="no-ch">3.2.- Inicio y fin de una sesión.</a></li>
      <li><a href="33_gestin_de_la_informacin_de_la_sesin_i.html" class="daddy">3.3.- Gestión de la información de la sesión (I).</a>
      <ul class="other-section">
         <li><a href="331_gestin_de_la_informacin_de_la_sesin_ii.html" class="no-ch">3.3.1.- Gestión de la información de la sesión (II).</a></li>
         <li><a href="332_gestin_de_la_informacin_de_la_sesin_iii.html" class="no-ch">3.3.2.- Gestión de la información de la sesión (III).</a></li>
         <li><a href="333_gestin_de_la_informacin_de_la_sesin_iv.html" class="no-ch">3.3.3.- Gestión de la información de la sesión (IV).</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="4_herramientas_para_depuracin_de_cdigo.html" class="daddy">4.- Herramientas para depuración de código.</a>
   <ul class="other-section">
      <li><a href="41_instalacin_de_herramientas_de_depuracin.html" class="no-ch">4.1.- Instalación de herramientas de depuración.</a></li>
      <li><a href="42_depuracin_de_cdigo_en_php.html" class="no-ch">4.2.- Depuración de código en PHP.</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="12_incorporacin_de_mtodos_de_autentificacin_a_una_aplicacin_web.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="3_manejo_de_sesiones.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">2.- Cookies.</h1></header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id17">
<div class="iDevice emphasis_casopracticofpd" >
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h1 class="iDeviceTitle">Caso práctico</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta17_66" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado"><img src="DWES04_CONT_R04_Carlos2.jpg" alt="Foto de medio cuerpo del personaje Carlos." title="Carlos2" height="196" width="124" /></div>
<div class="elemento_centrado credenciales"><a class="cc0" title="Dominio p&uacute;blico" href="http://creativecommons.org/publicdomain/zero/1.0/deed.es" target="_blank"><span class="transparente">Dominio p&uacute;blico</span></a>&nbsp;Elaboraci&oacute;n Propia</div>
</div>
<p>Una vez resuelto el tema de la autentificaci&oacute;n, el siguiente objetivo de <strong>Carlos</strong> es aprender a gestionar las <span lang="en">cookies</span>. <strong>Juan</strong> le ha explicado qu&eacute; son y c&oacute;mo funcionan, y seguramente las tengan que utilizar en la aplicaci&oacute;n que est&aacute;n desarrollando.</p>
<p>Sabe que muchos de los sitios <span lang="en">web</span> que visita las utilizan, porque ha probado a desactivarlas en su navegador, y le han empezado a aparecer mensajes pidi&eacute;ndole que las vuelva a activar. Se ha propuesto averiguar para qu&eacute; las utilizan, y c&oacute;mo las podr&aacute;n gestionar desde <span lang="en">PHP</span>.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id18">
<div class="iDevice emphasis0">
<div id="ta18_73" class="block iDevice_content">
<p>
Una <span lang="en">cookie</span> es un fichero de texto que un sitio <span lang="en">web</span> guarda en el entorno del usuario del navegador. Su uso más típico es el almacenamiento de las preferencias del usuario (por ejemplo, el idioma en que se deben mostrar las páginas), para que no tenga que volver a indicarlas la próxima vez que visite el sitio.
</p>

</div>
</div>
</article>
<article class="iDevice_wrapper RecomendacionfpdIdevice em_iDevice" id="id19">
<div class="iDevice emphasis_recomendacionfpd" >
<header class="iDevice_header" style="background-image:url(icon_recomendacionfpd.png)"><h1 class="iDeviceTitle">Recomendación</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta19_50" class="block iDevice_content">
<p>
Si utilizas <span lang="en">Firefox</span> como navegador, puedes instalar la extensión <span lang="en">Web Developer</span> para obtener información sobre las páginas <span lang="en">web</span> que visitas. Entre sus características te permite consultar y editar las <span lang="en">cookies</span> almacenadas en el mismo.
</p>
<p class="enlace_centrado">
<a href="https://addons.mozilla.org/es-es/firefox/addon/web-developer/" title="Acceder a la extensión Web Developer para el navegador web Firefox." target="_blank">Extensión <span lang="en">Web Developer</span>.</a>
</p>

</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id21">
<div class="iDevice emphasis0">
<div id="ta21_73" class="block iDevice_content">
<p>
En <span lang="en">PHP</span>, para almacenar una <span lang="en">cookie</span> en el navegador del usuario, puedes utilizar la función <code>setcookie</code>. El único parámetro obligatorio que tienes que usar es el nombre de la <span lang="en">cookie</span>, pero admite varios parámetros más opcionales.
</p>
<p class="enlace_centrado">
<a href="http://es.php.net/manual/es/function.setcookie.php" title="Acceder a la información sobre la función setcookie en el manual de PHP.">Función <code>setcookie</code>.</a>
</p>
<p>
Por ejemplo, si quieres almacenar en una <span lang="en">cookie</span> el nombre de usuario que se transmitió en las credenciales <span lang="en">HTTP</span> (es solo un ejemplo, no es en absoluto aconsejable almacenar información relativa a la seguridad en las <span lang="en">cookies</span>), puedes hacer:
</p>
<div class="codigo elemento_centrado" style="width: 43.4em">
<div class="texto_izquierda">
<pre>
<code>setcookie(&quot;nombre_usuario&quot;, $_SERVER['PHP_AUTH_USER'], time()+3600);</code>
</pre>
</div>
</div>
<p>
Los dos primeros parámetros son el nombre de la <span lang="en">cookie</span> y su valor. El tercero es la fecha de caducidad de la misma (una hora desde el momento en que se ejecute). En caso de no figurar este parámetro, la <span lang="en">cookie</span> se eliminará cuando se cierre el navegador. Ten en cuenta que también se pueden aplicar restricciones a las páginas del sitio que pueden acceder a una <span lang="en">cookie</span> en función de la ruta.
</p>
<p>
Las <span lang="en">cookies</span> se transmiten entre el navegador y el servidor <span lang="en">web</span> de la misma forma que las credenciales que acabas de ver; utilizando los encabezados del protocolo <span lang="en">HTTP</span>. Por ello, las sentencias <code>setcookie</code> deben enviarse antes de que el navegador muestre información alguna en pantalla.
</p>
<p>
El proceso de recuperación de la información que almacena una <span lang="en">cookie</span> es muy simple. Cuando accedes a un sitio <span lang="en">web</span>, el navegador le envía de forma automática todo el contenido de las <span lang="en">cookies</span> que almacene relativas a ese sitio en concreto. Desde <span lang="en">PHP</span> puedes acceder a esta información por medio del array <code>$_COOKIE</code>.
</p>

</div>
</div>
</article>
<article class="iDevice_wrapper DestacadofpdIdevice" id="id22">
<div class="iDevice emphasis0" >
<div class="iDevice_destacadofpd">
<div id="ta22_70" class="block iDevice_content">
Siempre que utilices <span lang="en">cookies</span> en una aplicación <span lang="en">web</span>, debes tener en cuenta que en última instancia su disponibilidad está controlada por el cliente. Por ejemplo, algunos usuarios deshabilitan las <span lang="en">cookies</span> en el navegador porque piensan que la información que almacenan puede suponer un potencial problema de seguridad. O la información que almacenan puede llegar a perderse porque el usuario decide formatear el equipo o simplemente eliminarlas de su sistema.

</div>
</div>
</div>
</article>
<article class="iDevice_wrapper RecomendacionfpdIdevice em_iDevice" id="id23">
<div class="iDevice emphasis_recomendacionfpd" >
<header class="iDevice_header" style="background-image:url(icon_recomendacionfpd.png)"><h1 class="iDeviceTitle">Recomendación</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta23_50" class="block iDevice_content">
Si una vez almacenada una <span lang="en">cookie</span> en el navegador quieres eliminarla antes de que expire, puedes utilizar la misma función <code>setcookie</code> pero indicando una fecha de caducidad anterior a la actual.

</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EjercicioresueltofpdIdevice em_iDevice" id="id24">
<div class="iDevice emphasis_ejercicioresueltofpd" >
<header class="iDevice_header" style="background-image:url(icon_ejercicioresueltofpd.png)"><h1 class="iDeviceTitle">Ejercicio resuelto</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section id="ta24_67" class="block story iDevice_content">

</section>
<section id="taquesQuestion0b24" class="block iDevice_content">
<p>Sobre el mismo ejercicio anterior, almacena en una <span lang="en">cookie</span> el último instante en que el usuario visitó la página. Si es su primera visita, muestra un mensaje de bienvenida. En caso contrario, muestra la fecha y hora de su anterior visita.</p>
<p><em>Es importante que tengas en cuenta que las cookies se cargan al conectarse o refrescar la página, por lo tanto el valor que se le dé a una cookie no se podrá recuperar hasta que se refresque la página.</em></p>
<p></p>
</section>
<form name="feedback-form-quesFeedback0b24" action="#" onsubmit="return false" class="feedback-form">
<div class="block iDevice_buttons feedback-button js-required">
<p><script type="text/javascript">var feedbackquesFeedback0b24text = "Mostrar retroalimentación";</script><input type="button" name="toggle-feedback-quesFeedback0b24" value="Mostrar retroalimentación" class="feedbackbutton feedback-toggler" /></p>
</div>
<section id="feedback-quesFeedback0b24" class="feedback js-feedback js-hidden">
<h1 class="js-sr-av">Retroalimentación</h1>
<p>
Revisa la solución propuesta. Deberás utilizar la función <code>setcookie</code> para guardar el instante de su anterior visita y mostrar su contenido utilizando el array <code>$_COOKIE</code>.
</p>
<div class="enlace_centrado">
 <a class="pdf" href="DWES04_CONT_R04b_Solucion_ejercicio.pdf" title="Descargar la solución al ejercicio de utilización de una cookie  para almacenar el instante de la última visita del usuario. [pdf - 9.00 KB]">Solución propuesta.</a> <span class="tamano"> (9.00 KB) </span> 
</div>
</section>
</form>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id25">
<div class="iDevice emphasis_autoevaluacionfpd" >
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h1 class="iDeviceTitle">Autoevaluación</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-25_60" action="#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion25_60" class="block question iDevice_content">
<p>
<strong>¿Cuál es la duración por defecto de una <span lang="en">cookie</span> si no se indica la fecha de caducidad, como en la siguiente llamada a la función <code>setcookie</code>?</strong>
</p>
<div class="codigo elemento_centrado" style="width: 23.05em">
<div class="texto_izquierda">
<pre>
<code>setcookie(&quot;idioma&quot;, “español”);</code>
</pre>
</div>
</div>

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i25_63" class="sr-av"><a href="#answer-25_63">Opción 1</a></label><input type="radio" name="option25_60" id="i25_63" class="exe-radio-option exe-radio-option-0-2-25_60-multi"/>
</p>
<div class="iDevice_answer-content" id="answer-25_63"><div id="taans25_63" class="block iDevice_content">
Hasta que se cierre el navegador del usuario.

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i25_97" class="sr-av"><a href="#answer-25_97">Opción 2</a></label><input type="radio" name="option25_60" id="i25_97" class="exe-radio-option exe-radio-option-1-2-25_60-multi"/>
</p>
<div class="iDevice_answer-content" id="answer-25_97"><div id="taans25_97" class="block iDevice_content">
1 hora.

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b25_60" class="feedback js-hidden">
<div id="taf25_63" class=" iDevice_content">
Efectivamente, cuando se acaba la sesión del usuario, al cerrar el navegador, se borra la <span lang="en">cookie</span>.

</div>
</section>
<section id="sa1b25_60" class="feedback js-hidden">
<div id="taf25_97" class=" iDevice_content">
Lee bien el texto que habla de los parámetros de la función <code>setcookie</code>.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="#answer-25_63">Opción correcta</a><span> (<a href="#sa0b25_60">Retroalimentación</a>)</span></li>
<li><a href="#answer-25_97">Incorrecto</a><span> (<a href="#sa1b25_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="12_incorporacin_de_mtodos_de_autentificacin_a_una_aplicacin_web.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="3_manejo_de_sesiones.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_fpd_js.js"></script></body></html>